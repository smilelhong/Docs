<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue-router详解 | 跨过山河大海的攻城狮</title>
    <meta name="description" content="There is no royal road to learning">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.ec6bccb2.css" as="style"><link rel="preload" href="/assets/js/app.518a227c.js" as="script"><link rel="preload" href="/assets/js/3.70fd9169.js" as="script"><link rel="preload" href="/assets/js/4.538a04d4.js" as="script"><link rel="prefetch" href="/assets/js/10.365213d4.js"><link rel="prefetch" href="/assets/js/11.32985faf.js"><link rel="prefetch" href="/assets/js/12.01d023c9.js"><link rel="prefetch" href="/assets/js/13.d1e4177c.js"><link rel="prefetch" href="/assets/js/14.aa61d457.js"><link rel="prefetch" href="/assets/js/15.ceeab785.js"><link rel="prefetch" href="/assets/js/16.1d4d4525.js"><link rel="prefetch" href="/assets/js/17.2efd3caf.js"><link rel="prefetch" href="/assets/js/18.f1ca622d.js"><link rel="prefetch" href="/assets/js/19.f20b45ac.js"><link rel="prefetch" href="/assets/js/20.231a0a8a.js"><link rel="prefetch" href="/assets/js/21.43d3d262.js"><link rel="prefetch" href="/assets/js/5.29b61dc1.js"><link rel="prefetch" href="/assets/js/6.fc624eee.js"><link rel="prefetch" href="/assets/js/7.2bb33529.js"><link rel="prefetch" href="/assets/js/8.b220b584.js"><link rel="prefetch" href="/assets/js/9.b09edcb6.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.a62bcc3d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ec6bccb2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">跨过山河大海的攻城狮</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tech Menu" class="dropdown-title"><span class="title">技术文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tech/vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-subitem"><a href="/tech/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-subitem"><a href="/tech/vue-cli/" class="nav-link">
  Vue-cli
</a></li></ul></li><li class="dropdown-item"><h4>
          后端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tech/python/" class="nav-link">
  Python
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other Menu" class="dropdown-title"><span class="title">随便写写</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tech/python/" class="nav-link">
  摄影
</a></li><li class="dropdown-item"><!----> <a href="/tech/python/" class="nav-link">
  美食
</a></li></ul></div></div><div class="nav-item"><a href="/tech/vue/" class="nav-link router-link-active">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Friend Menu" class="dropdown-title"><span class="title">友链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.leesans.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LeeSans
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mifuko.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  黄金飞
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tech Menu" class="dropdown-title"><span class="title">技术文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tech/vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-subitem"><a href="/tech/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-subitem"><a href="/tech/vue-cli/" class="nav-link">
  Vue-cli
</a></li></ul></li><li class="dropdown-item"><h4>
          后端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tech/python/" class="nav-link">
  Python
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Other Menu" class="dropdown-title"><span class="title">随便写写</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tech/python/" class="nav-link">
  摄影
</a></li><li class="dropdown-item"><!----> <a href="/tech/python/" class="nav-link">
  美食
</a></li></ul></div></div><div class="nav-item"><a href="/tech/vue/" class="nav-link router-link-active">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Friend Menu" class="dropdown-title"><span class="title">友链</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.leesans.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LeeSans
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://mifuko.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  黄金飞
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/vue/" class="sidebar-link">Vue基本介绍</a></li><li><a href="/tech/vue/邂逅Vue.html" class="sidebar-link">邂逅Vue.js</a></li><li><a href="/tech/vue/Vue基础语法.html" class="sidebar-link">Vue基础语法</a></li><li><a href="/tech/vue/组件化开发.html" class="sidebar-link">组件化开发</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/vue/前端模块化.html" class="sidebar-link">前端模块化</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue-router详解"><a href="#vue-router详解" class="header-anchor">#</a> vue-router详解</h1> <h2 id="认识路由的概念"><a href="#认识路由的概念" class="header-anchor">#</a> 认识路由的概念</h2> <h3 id="后端路由的时代"><a href="#后端路由的时代" class="header-anchor">#</a> 后端路由的时代</h3> <ul><li><p>早期的网站开发整个HTML页面是由服务器来渲染的.</p> <ul><li>服务器直接生产渲染好对应的HTML页面, 返回给客户端进行展示.</li></ul></li> <li><p>但是, 一个网站, 这么多页面服务器如何处理呢?</p> <ul><li>一个页面有自己对应的网址, 也就是URL.</li> <li>URL会发送到服务器, 服务器会通过正则对该URL进行匹配, 并且最后交给一个Controller进行处理.</li> <li>Controller进行各种处理, 最终生成HTML或者数据, 返回给前端.</li> <li>这就完成了一个IO操作.</li></ul></li> <li><p>上面的这种操作, 就是后端路由.</p> <ul><li>当我们页面中需要请求不同的路径内容时, 交给服务器来进行处理, 服务器渲染好整个页面, 并且将页面返回给客户顿.</li> <li>这种情况下渲染好的页面, 不需要单独加载任何的js和css, 可以直接交给浏览器展示, 这样也有利于SEO的优化.</li></ul></li> <li><p>后端路由的缺点:</p> <ul><li>一种情况是整个页面的模块由后端人员来编写和维护的.</li> <li>另一种情况是前端开发人员如果要开发页面, 需要通过PHP和Java等语言来编写页面代码.</li> <li>而且通常情况下HTML代码和数据以及对应的逻辑会混在一起, 编写和维护都是非常糟糕的事情.</li></ul></li></ul> <h3 id="前端路由的时代"><a href="#前端路由的时代" class="header-anchor">#</a> 前端路由的时代</h3> <ul><li>前后端分离阶段：
<ul><li>随着Ajax的出现, 有了前后端分离的开发模式.</li> <li>后端只提供API来返回数据, 前端通过Ajax获取数据, 并且可以通过JavaScript将数据渲染到页面中.</li> <li>这样做最大的优点就是前后端责任的清晰, 后端专注于数据上, 前端专注于交互和可视化上.</li> <li>并且当移动端(iOS/Android)出现后, 后端不需要进行任何处理, 依然使用之前的一套API即可.</li> <li>目前很多的网站依然采用这种模式开发.</li></ul></li> <li>单页面富应用阶段:
<ul><li>其实SPA最主要的特点就是在前后端分离的基础上加了一层前端路由.</li> <li>也就是前端来维护一套路由规则.</li></ul></li> <li>前端路由的核心是什么呢？
<ul><li>改变URL，但是页面不进行整体的刷新。</li> <li>如何实现呢？</li></ul></li></ul> <h3 id="url的hash"><a href="#url的hash" class="header-anchor">#</a> URL的hash</h3> <ul><li>URL的hash
<ul><li>URL的hash也就是锚点(#), 本质上是改变window.location的href属性.</li> <li>我们可以通过直接赋值location.hash来改变href, 但是页面不发生刷新</li></ul></li></ul> <p><img src="/assets/img/url_hash.ab1c20e1.png" alt="urlhash"></p> <h3 id="html5的history模式"><a href="#html5的history模式" class="header-anchor">#</a> HTML5的history模式</h3> <ul><li>history接口是HTML5新增的, 它有五种模式改变URL而不刷新页面.
<ul><li>history.pushState()</li> <li>history.replaceState()</li> <li>history.go()</li> <li>history.back()等同于history.go(-1)</li> <li>history.forward()等同于history.go(1)</li></ul></li></ul> <h2 id="vue-router基础"><a href="#vue-router基础" class="header-anchor">#</a> vue-router基础</h2> <h3 id="认识vue-router"><a href="#认识vue-router" class="header-anchor">#</a> 认识vue-router</h3> <p>目前前端流行的三大框架, 都有自己的路由实现:</p> <ul><li><p>Angular的ngRouter</p></li> <li><p>React的ReactRouter</p></li> <li><p>Vue的vue-router</p></li></ul> <p>当然, 我们的重点是vue-router</p> <ul><li>vue-router是Vue.js官方的路由插件，它和vue.js是深度集成的，适合用于构建单页面应用。</li> <li>我们可以访问其官方网站对其进行学习: https://router.vuejs.org/zh/</li></ul> <p>vue-router是基于路由和组件的</p> <ul><li>路由用于设定访问路径, 将路径和组件映射起来.</li> <li>在vue-router的单页面应用中, 页面的路径的改变就是组件的切换.</li></ul> <h3 id="安装和使用vue-router"><a href="#安装和使用vue-router" class="header-anchor">#</a> 安装和使用vue-router</h3> <p>因为我们已经学习了webpack, 后续开发中我们主要是通过工程化的方式进行开发的.
所以在后续, 我们直接使用npm来安装路由即可.</p> <ul><li><p>步骤一: 安装vue-router</p> <ul><li>npm install vue-router --save</li></ul></li> <li><p>步骤二: 在模块化工程中使用它(因为是一个插件, 所以可以通过Vue.use()来安装路由功能)</p> <ul><li>第一步：导入路由对象，并且调用 Vue.use(VueRouter)</li> <li>第二步：创建路由实例，并且传入路由映射配置</li></ul> <p><img src="/assets/img/create_vuerouter.af84efb0.png" alt="create"></p> <ul><li>第三步：在Vue实例中挂载创建的路由实例</li></ul> <p><img src="/assets/img/mount_vuerouter.670f5fd5.png" alt="mount"></p></li> <li><p>使用vue-router的步骤:</p> <ul><li>第一步: 创建路由组件</li></ul> <p><img src="/assets/img/init_vuerouter.3e3605cc.png" alt="init"></p> <ul><li>第二步: 配置路由映射: 组件和路径映射关系</li></ul> <p><img src="/assets/img/config_vuerouter.62dc1a99.png" alt="config"></p> <ul><li>第三步: 使用路由: 通过<code>&lt;router-link&gt;</code>和<code>&lt;router-view&gt;</code></li></ul> <img src="/assets/img/use_vuerouter.423f77df.png" alt="use" style="zoom:80%;"></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li><code>&lt;router-link&gt;</code>: 该标签是一个vue-router中已经内置的组件, 它会被渲染成一个<code>&lt;a&gt;</code>标签.</li> <li><code>&lt;router-view&gt;</code>: 该标签会根据当前的路径, 动态渲染出不同的组件.</li> <li>网页的其他内容, 比如顶部的标题/导航, 或者底部的一些版权信息等会和<code>&lt;router-view&gt;</code>处于同一个等级.</li> <li>在路由切换时, 切换的是<code>&lt;router-view&gt;</code>挂载的组件, 其他内容不会发生改变.</li></ul></div> <h3 id="vue-router细节补充"><a href="#vue-router细节补充" class="header-anchor">#</a> vue-router细节补充</h3> <h4 id="路由的默认路径"><a href="#路由的默认路径" class="header-anchor">#</a> 路由的默认路径</h4> <p>我们这里还有一个不太好的实现:</p> <ul><li>默认情况下, 进入网站的首页, 我们希望<code>&lt;router-view&gt;</code>渲染首页的内容.</li> <li>但是我们的实现中, 默认没有显示首页组件, 必须让用户点击才可以.</li> <li>如何可以让路径默认跳到到首页, 并且<code>&lt;router-view&gt;</code>渲染首页组件呢?
<ul><li>非常简单, 我们只需要配置多配置一个映射就可以了.</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
  redirect<span class="token operator">:</span> <span class="token string">'/home'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>配置解析:</strong></p> <ul><li>我们在routes中又配置了一个映射.</li> <li>path配置的是根路径: /</li> <li>redirect是重定向, 也就是我们将根路径重定向到/home的路径下, 这样就可以得到我们想要的结果了.</li></ul> <h4 id="html5的history模式-2"><a href="#html5的history模式-2" class="header-anchor">#</a> HTML5的History模式</h4> <ul><li>我们前面说过改变路径的方式有两种:
<ul><li>URL的hash</li> <li>HTML5的history</li> <li>默认情况下, 路径的改变使用的URL的hash.</li></ul></li> <li>如果希望使用HTML5的history模式, 非常简单, 进行如下配置即可:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">,</span>
  mode<span class="token operator">:</span> <span class="token string">'history'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>通过修改成HTML5的history模式，还会使URL里面的#号消失！</p> <h4 id="router-link补充"><a href="#router-link补充" class="header-anchor">#</a> router-link补充</h4> <ul><li>在前面的<code>&lt;router-link&gt;</code>中, 我们只是使用了一个属性: to, 用于指定跳转的路径.</li> <li><code>&lt;router-link&gt;</code>还有一些其他属性:
<ul><li>tag: tag可以指定<code>&lt;router-link&gt;</code>之后渲染成什么组件, 比如上面的代码会被渲染成一个<code>&lt;li&gt;</code>元素, 而不是<code>&lt;a&gt;</code></li> <li>replace: replace不会留下history记录, 所以指定replace的情况下, 后退键返回不能返回到上一个页面中</li> <li>active-class: 当<code>&lt;router-link&gt;</code>对应的路由匹配成功时, 会自动给当前元素设置一个router-link-active的class, 设置active-class可以修改默认的名称.
<ul><li>在进行高亮显示的导航菜单或者底部tabbar时, 会使用到该类.</li> <li>但是通常不会修改类的属性, 会直接使用默认的router-link-active即可.</li></ul></li></ul></li></ul> <h4 id="路由代码跳转"><a href="#路由代码跳转" class="header-anchor">#</a> 路由代码跳转</h4> <p>有时候, 页面的跳转可能需要执行对应的JavaScript代码, 这个时候, 就可以使用第二种跳转方式了</p> <p>代码如下：</p> <div class="language-html extra-class"><pre class="language-html"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-cpn</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-cpn</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myCpn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>路由代码跳转<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>linkToHome<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>linkToAbout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./vue.js<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
		Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-cpn'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
			template<span class="token operator">:</span> <span class="token string">'#myCpn'</span><span class="token punctuation">,</span>
			<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">{</span>
					pLanguages<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Java'</span><span class="token punctuation">,</span><span class="token string">'python'</span><span class="token punctuation">,</span><span class="token string">'swift'</span><span class="token punctuation">,</span><span class="token string">'go'</span><span class="token punctuation">,</span><span class="token string">'C++'</span><span class="token punctuation">]</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			methods<span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token function">linkToAbout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function">linkToHome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		
		<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="动态路由"><a href="#动态路由" class="header-anchor">#</a> 动态路由</h4> <ul><li>在某些情况下，一个页面的path路径可能是不确定的，比如我们进入用户界面时，希望是如下的路径：
<ul><li>/user/aaaa或/user/bbbb</li> <li>除了有前面的/user之外，后面还跟上了用户的ID</li> <li>这种path和Component的匹配关系，我们称之为动态路由(也是路由传递数据的一种方式)</li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code>{
  path: '/user/:id'
  component: User
}
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>
    {{ $route.params.id}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">&quot;/user/123&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
</code></pre></div><h2 id="认识路由懒加载"><a href="#认识路由懒加载" class="header-anchor">#</a> 认识路由懒加载</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>官方给出了解释:
<ul><li>当打包构建应用时，Javascript 包会变得非常大，影响页面加载</li> <li>如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，这样就更加高效了</li></ul></li></ul></div> <p>理解：</p> <ul><li>首先, 我们知道路由中通常会定义很多不同的页面</li> <li>这个页面最后被打包在哪里呢? 一般情况下, 是放在一个js文件中</li> <li>但是, 页面这么多放在一个js文件中, 必然会造成这个页面非常的大</li> <li>如果我们一次性从服务器请求下来这个页面, 可能需要花费一定的时间, 甚至用户的电脑上还出现了短暂空白的情况.</li> <li>如何避免这种情况呢? 使用路由懒加载就可以了</li></ul> <p>路由懒加载做了什么?</p> <ul><li>路由懒加载的主要作用就是将路由对应的组件打包成一个个的js代码块</li> <li>只有在这个路由被访问到的时候, 才加载对应的组件</li></ul> <h3 id="路由懒加载的效果"><a href="#路由懒加载的效果" class="header-anchor">#</a> 路由懒加载的效果</h3> <ul><li>在没有使用路由懒加载之前：</li> <li>使用路由懒加载之后：</li></ul> <h3 id="路由懒加载的方式"><a href="#路由懒加载的方式" class="header-anchor">#</a> 路由懒加载的方式</h3> <ul><li>方式一：结合Vue的异步组件和Webpack的代码分析</li></ul> <p><code>const Home = resolve =&gt; { require.ensure(['../components/Home.vue'], () =&gt; { resolve(require('../components/Home.vue')) })};</code></p> <ul><li>方式二：AMD写法</li></ul> <p><code>const About = resolve =&gt; require(['../components/About.vue'], resolve)</code></p> <ul><li>方式三：在ES6中，我们可以由更加简单的写法来组织Vue的一步组件和Webpack的代码分割</li></ul> <p><code>const Home = () =&gt; import('../components/Home.vue')</code></p> <h2 id="嵌套路由的使用"><a href="#嵌套路由的使用" class="header-anchor">#</a> 嵌套路由的使用</h2> <h3 id="认识嵌套路由"><a href="#认识嵌套路由" class="header-anchor">#</a> 认识嵌套路由</h3> <p>嵌套路由是一个很常见的功能：</p> <ul><li>比如在home页面中, 我们希望通过/home/news和/home/message访问一些内容</li> <li>一个路径映射一个组件, 访问这两个路径也会分别渲染两个组件</li></ul> <p>路径和组件的关系如下：</p> <p><strong>实现嵌套路由有两个步骤:</strong></p> <ul><li>创建对应的子组件, 并且在路由映射中配置对应的子路由</li> <li>在组件内部使用<code>&lt;router-view&gt;</code>标签</li></ul> <h3 id="嵌套路由的实现"><a href="#嵌套路由的实现" class="header-anchor">#</a> 嵌套路由的实现</h3> <h3 id="嵌套默认路径"><a href="#嵌套默认路径" class="header-anchor">#</a> 嵌套默认路径</h3> <p><strong>嵌套路由也可以配置默认的路径, 配置方式如下:</strong></p> <h2 id="vue-router参数传递"><a href="#vue-router参数传递" class="header-anchor">#</a> vue-router参数传递</h2> <h3 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h3> <p>我们通过一个例子来演示参数传递，我们这里再创建一个组件, 并且将其配置好</p> <ul><li>第一步: 创建新的组件Profile.vue</li> <li>第二步: 配置路由映射</li> <li>第三步: 添加跳转的<code>&lt;router-link&gt;</code></li></ul> <p><strong>第一步：Profile.vue文件配置</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>
      我是档案的标题
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;profile&quot;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>第二步：vue-router的index.js文件配置</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
	path<span class="token operator">:</span> <span class="token string">'/profile'</span>
  component<span class="token operator">:</span> Profile
<span class="token punctuation">}</span>
</code></pre></div><p><strong>第三步：app.vue文件配置</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>档案<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id=""><a href="#" class="header-anchor">#</a></h3> <h3 id="参数传递：params方式"><a href="#参数传递：params方式" class="header-anchor">#</a> 参数传递：params方式</h3> <ul><li>配置路由格式: /router/:id</li> <li>传递的方式: 在path后面跟上对应的值</li> <li>传递后形成的路径: /router/123, /router/abc</li></ul> <h4 id="方式一：-router-link"><a href="#方式一：-router-link" class="header-anchor">#</a> 方式一：<code>&lt;router-link&gt;</code></h4> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{path: '/profile/' + （参数）}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>档案<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="方式二：javascript代码"><a href="#方式二：javascript代码" class="header-anchor">#</a> 方式二：<code>Javascript代码</code></h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">toProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/profile/'</span> <span class="token operator">+</span> 参数
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="参数传递：query方式"><a href="#参数传递：query方式" class="header-anchor">#</a> 参数传递：query方式</h3> <ul><li>配置路由格式: /router, 也就是普通配置</li> <li>传递的方式: 对象中使用query的key作为传递方式</li> <li>传递后形成的路径: /router?id=123, /router?id=abc</li></ul> <h4 id="方式一：-router-link-2"><a href="#方式一：-router-link-2" class="header-anchor">#</a> 方式一：<code>&lt;router-link&gt;</code></h4> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{
                  path: '/profile/' + （参数）
                  query: { name: 'why', age: 18}}<span class="token punctuation">&quot;</span></span>
             <span class="token punctuation">&gt;</span></span>档案<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="方式二：javascript代码-2"><a href="#方式二：javascript代码-2" class="header-anchor">#</a> 方式二：<code>Javascript代码</code></h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">toProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/profile/'</span> <span class="token operator">+</span> 参数<span class="token punctuation">,</span>
        query<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'why'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="获取参数"><a href="#获取参数" class="header-anchor">#</a> 获取参数</h3> <ul><li>获取参数通过**$route**对象获取的
<ul><li>在使用了 vue-router 的应用中，路由对象会被注入每个组件中，赋值为<strong>this.$router</strong>，并且当路由切换时，路由对象会被更新</li></ul></li> <li>通过$route获取传递的信息如下:</li></ul> <h3 id="route和-router的区别"><a href="#route和-router的区别" class="header-anchor">#</a> $route和$router的区别</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>$route和$router是有区别的
<ul><li>$router为VueRouter实例，想要导航到不同URL，则使用$router.push方法</li> <li>$route为当前router跳转对象里面可以获取name、path、query、params等</li></ul></li></ul></div> <h2 id="vue-router导航守卫"><a href="#vue-router导航守卫" class="header-anchor">#</a> vue-router导航守卫</h2> <h3 id="为什么使用导航守卫？"><a href="#为什么使用导航守卫？" class="header-anchor">#</a> 为什么使用导航守卫？</h3> <p>我们来考虑一个需求: 在一个SPA应用中, 如何改变网页的标题呢?</p> <ul><li>网页标题是通过<code>&lt;title&gt;</code>来显示的, 但是SPA只有一个固定的HTML, 切换不同的页面时, 标题并不会改变</li> <li>但是我们可以通过JavaScript来修改<code>&lt;title&gt;</code>的内容.window.document.title = '新的标题'</li> <li>那么在Vue项目中, 在哪里修改? 什么时候修改比较合适呢?</li></ul> <p>普通的修改方式:</p> <ul><li>我们比较容易想到的修改标题的位置是每一个路由对应的组件.vue文件中</li> <li>通过mounted声明周期函数, 执行对应的代码进行修改即可</li> <li>但是当页面比较多时, 这种方式不容易维护(因为需要在多个页面执行类似的代码)</li></ul> <p>有没有更好的办法呢? 使用导航守卫即可.
什么是导航守卫?</p> <ul><li>vue-router提供的导航守卫主要用来监听监听路由的进入和离开的</li> <li>vue-router提供了beforeEach和afterEach的钩子函数, 它们会在路由即将改变前和改变后触发</li></ul> <h3 id="导航守卫的使用"><a href="#导航守卫的使用" class="header-anchor">#</a> 导航守卫的使用</h3> <p>我们可以利用beforeEach来完成标题的修改</p> <ul><li>首先, 我们可以在钩子当中定义一些标题, 可以利用meta来定义</li> <li>其次, 利用导航守卫,修改我们的标题</li></ul> <p>导航钩子的三个参数解析:</p> <ul><li>to: 即将要进入的目标的路由对象</li> <li>from: 当前导航即将要离开的路由对象</li> <li>next: 调用该方法后, 才能进入下一个钩子</li></ul> <h3 id="导航守卫补充"><a href="#导航守卫补充" class="header-anchor">#</a> 导航守卫补充</h3> <ul><li>补充一:如果是后置钩子, 也就是afterEach, 不需要主动调用next()函数</li> <li>补充二: 上面我们使用的导航守卫, 被称之为全局守卫
<ul><li>路由独享的守卫</li> <li>组件内的守卫</li></ul></li></ul> <h2 id="keep-alive"><a href="#keep-alive" class="header-anchor">#</a> keep-alive</h2> <ul><li><p>keep-alive 是 Vue 内置的一个组件，可以使被包含的组件保留状态，或避免重新渲染。</p> <ul><li>它们有两个非常重要的属性:
<ul><li>include - 字符串或正则表达，只有匹配的组件会被缓存</li> <li>exclude - 字符串或正则表达式，任何匹配的组件都不会被缓存</li></ul></li></ul></li> <li><p>router-view 也是一个组件，如果直接被包在 keep-alive 里面，所有路径匹配到的视图组件都会被缓存：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span>
  	<span class="token comment">&lt;!-- 所有路径匹配到的视图组件都会被缓存！ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>通过create声明周期函数来验证</p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020-2-19 16:02:20</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.518a227c.js" defer></script><script src="/assets/js/3.70fd9169.js" defer></script><script src="/assets/js/4.538a04d4.js" defer></script>
  </body>
</html>
